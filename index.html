<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯Ø±Ø³Ø© Ø£Ù…ÙŠØ± Ù„Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±Ù | Amir School</title>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #ff6b81;
            --primary-dark: #ff4757;
            --secondary-bg: #fff5f7;
            --bg-gradient: linear-gradient(135deg, #ffe0e9 0%, #fff0f6 100%);
            --white: #ffffff;
            --text: #333;
            --muted: #666;
            --radius: 25px;
            --shadow: 0 15px 35px rgba(255, 107, 129, 0.12);
            --success: #2ed573;
            --danger: #ff4757;
            --star-color: #FFD700;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text);
        }

        .news-ticker {
            background: var(--primary-dark);
            color: white;
            padding: 12px 0;
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 2000;
            font-size: 0.95rem;
            font-weight: 600;
        }
        .ticker-content {
            display: inline-block;
            white-space: nowrap;
            animation: ticker 40s linear infinite; 
        }
        @keyframes ticker {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        #backToTop {
            position: fixed; bottom: 30px; right: 20px; background: white;
            color: var(--primary-dark); width: 50px; height: 50px; border-radius: 50%;
            display: none; align-items: center; justify-content: center;
            cursor: pointer; z-index: 3000; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border: 2px solid var(--primary-dark);
        }

        #schoolDesc::after { content: "|"; animation: blink 0.7s infinite; color: var(--primary); }
        @keyframes blink { 50% { opacity: 0; } }

        .main-wrapper { display: flex; justify-content: center; padding: 20px 10px; }

        .container {
            background: rgba(255, 255, 255, 0.98);
            width: 100%;
            max-width: 900px;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            padding-bottom: 40px;
        }

        .header-section { position: relative; margin-bottom: 70px; }
        .cover-photo {
            width: 100%; height: 180px;
            background: url('images/cover.jpg') center/cover no-repeat;
            background-color: var(--primary);
        }

        .profile-img {
            width: 130px; height: 130px; border-radius: 50%;
            object-fit: cover; border: 5px solid #fff;
            position: absolute; bottom: -65px; left: 50%;
            transform: translateX(-50%);
        }

        .status-badge {
            display: inline-flex; flex-direction: column; align-items: center;
            padding: 10px 20px; border-radius: 15px; margin-top: 15px;
            font-weight: 700; font-size: 0.9rem;
        }
        .status-open { background: #e7fbf2; color: var(--success); border: 1px solid #c1f2dc; }
        .status-closed { background: #fff1f2; color: var(--danger); border: 1px solid #ffd1d6; }
        .dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-left: 5px; }
        .dot-open { background: var(--success); animation: pulse 1.5s infinite; }
        .dot-closed { background: var(--danger); }

        .links-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 12px; margin: 30px 20px;
        }

        .link-btn {
            position: relative; padding: 15px; border-radius: 15px; background: #fff;
            border: 1px solid #fce4ec; text-decoration: none; color: var(--text);
            font-weight: 700; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            display: flex; align-items: center; justify-content: center;
        }

        .link-btn i { position: absolute; right: 15px; color: var(--primary); transition: 0.3s; }

        .link-btn:hover {
            transform: translateY(-5px);
            background-color: var(--secondary-bg);
            border-color: var(--primary);
            box-shadow: 0 10px 20px rgba(255, 107, 129, 0.15);
            color: var(--primary-dark);
        }

        .section-title { margin: 40px 0 25px; color: var(--primary-dark); font-size: 1.4rem; }
        .section-title::after { content: ''; width: 50px; height: 4px; background: var(--primary); display: block; margin: 8px auto; border-radius: 10px; }

        .countdown-container { 
            background: linear-gradient(135deg, var(--primary-dark) 0%, #ff8a9a 100%); 
            color: white; margin: 20px; padding: 25px; border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(255, 71, 87, 0.2);
        }
        .countdown-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 15px; }
        
        .countdown-item { 
            background: rgba(255,255,255,0.2); 
            backdrop-filter: blur(5px);
            padding: 15px; border-radius: 15px; min-width: 140px; 
            border: 1px solid rgba(255,255,255,0.3);
            border-bottom: 4px solid white;
        }

        .cd-days { font-size: 2rem; font-weight: 800; color: white; display: block; }
        .cd-label { font-size: 0.85rem; font-weight: 600; }

        .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px; }
        .feature-card { background: #fff; padding: 20px; border-radius: 20px; border: 1px solid #fce4ec; transition: 0.3s; text-align: center; }
        .feature-card i { font-size: 2.2rem; color: var(--primary); margin-bottom: 12px; display: block; }

        .packaging-banner { background: var(--secondary-bg); margin: 20px; border-radius: 20px; padding: 25px; display: flex; align-items: center; gap: 20px; border: 2px dashed var(--primary); text-align: right; }
        .packaging-icon { font-size: 2.5rem; color: var(--primary); }

        .sweets-grid { display: grid; gap: 15px; padding: 0 20px; grid-template-columns: repeat(2, 1fr); }
        @media(min-width:650px){ .sweets-grid { grid-template-columns: repeat(3, 1fr); } }
        @media(min-width:900px){ .sweets-grid { grid-template-columns: repeat(4, 1fr); } }
        .sweet-card { background: #fff; border-radius: 18px; padding: 10px; border: 1px solid #fce4ec; transition: 0.3s; }
        .sweet-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: var(--shadow); }
        .sweet-img { width: 100%; height: 110px; object-fit: cover; border-radius: 12px; margin-bottom: 10px; }

        .add-to-cart-btn {
            background: var(--primary-dark); color: white; border: none;
            padding: 10px; border-radius: 12px; width: 100%; margin-top: 10px;
            cursor: pointer; font-family: 'Cairo'; font-weight: 700; transition: 0.3s;
        }

        .testimonials-wrapper { overflow: hidden; margin: 30px 20px; padding: 20px 0; background: #fffafb; border-radius: 20px; border: 1px solid #fce4ec; }
        .testimonials-slider { display: flex; gap: 20px; width: max-content; animation: scroll 40s linear infinite; }
        .testimonial-card { background: var(--white); padding: 20px; border-radius: 15px; width: 280px; text-align: right; border-right: 4px solid var(--primary); flex-shrink: 0; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(calc(280px * 5 + 20px * 5)); } }

        .faq-container { margin: 0 20px; text-align: start; }
        .faq-item { background: #fff; border-radius: 15px; border: 1px solid #fce4ec; margin-bottom: 10px; overflow: hidden; }
        .faq-question { width: 100%; border: none; background: none; padding: 18px; font-weight: 700; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-family: 'Cairo'; }
        .faq-answer { max-height: 0; overflow: hidden; padding: 0 18px; transition: 0.3s; background: var(--secondary-bg); }
        .faq-item.active .faq-answer { max-height: 200px; padding: 18px; border-top: 1px solid #fce4ec; }

        .hours-card { background: #fff5f7; margin: 20px auto; padding: 20px; border-radius: 20px; border: 1px solid #fce4ec; max-width: 900px; width: 92%; }
        .hours-table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
        .hours-table tr { background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
        .hours-table td { padding: 15px; font-weight: 700; }
        .time-cell { direction: ltr; text-align: left; color: #666; }

        .order-form { text-align: right; padding: 25px; background: #fff; border-radius: 20px; border: 1px solid #fce4ec; margin: 0 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 700; margin-bottom: 8px; color: var(--primary-dark); }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 14px; border: 1px solid #fce4ec; border-radius: 15px; font-family: 'Cairo'; outline: none; }
        
        .btn-send { width: 100%; background: var(--success); color: white; border: none; padding: 18px; border-radius: 18px; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }

        .cart-floating-btn {
            position: fixed; bottom: 30px; left: 20px; background: var(--primary-dark);
            color: white; width: 65px; height: 65px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 5000; box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .cart-count { position: absolute; top: -5px; right: -5px; background: var(--success); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; border: 2px solid white; }

        .cart-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 9999; align-items: center; justify-content: center; }
        .cart-content { background: white; width: 95%; max-width: 480px; padding: 25px; border-radius: 30px; max-height: 90vh; display: flex; flex-direction: column; overflow-y: auto; }
        
        .delivery-section { background: #fdf2f4; border-radius: 20px; padding: 15px; margin: 15px 0; border: 1px solid #ffccd5; }
        .delivery-track { height: 6px; background: #e0e0e0; width: 100%; margin: 35px 0 10px; position: relative; border-radius: 10px; }
        .moto-icon { position: absolute; top: -28px; right: 0%; font-size: 1.8rem; color: var(--primary-dark); transition: right 1s ease-in-out; }

        .search-dropdown { position: absolute; top: 100%; left: 0; width: 100%; background: white; z-index: 1000; border-radius: 12px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); display: none; max-height: 150px; overflow-y: auto; text-align: right; }
        .search-item { padding: 12px; cursor: pointer; border-bottom: 1px solid #eee; }

        .main-footer { background: #2d3436; color: white; padding: 40px 15px; border-radius: 40px 40px 0 0; text-align: center; }
        .footer-logo { font-size: 1.8rem; font-weight: 700; color: var(--primary); margin-bottom: 10px; }
        .highlight-primary { color: #f54c03; font-weight: bold; }
    </style>
</head>

<body>

<div class="news-ticker">
    <div class="ticker-content" id="tickerContent">
        ğŸ“¢ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ù…ÙØªÙˆØ­Ø© Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ùˆ Ø§Ù„Ø¹ØµØ±ÙŠØ© .. Ø³Ø§Ø±Ø¹ÙˆØ§ Ø¨Ø­Ø¬Ø² Ø£Ù…Ø§ÙƒÙ†ÙƒÙ…! | ğŸ† Ø´Ù‡Ø§Ø¯Ø§Øª ÙˆØ·Ù†ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© ØªÙ…ÙƒÙ†ÙƒÙ… Ù…Ù† ÙØªØ­ Ù…Ø´Ø§Ø±ÙŠØ¹ÙƒÙ… Ø§Ù„Ø®Ø§ØµØ© | ğŸ° Ø·Ù„Ø¨ÙŠØ§Øª Ø§Ù„Ø£Ø¹Ø±Ø§Ø³ ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ù…ØªÙˆÙØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹
    </div>
</div>

<div id="backToTop" onclick="scrollToTop()"><i class="fas fa-chevron-up"></i></div>

<div class="main-wrapper">
    <div class="container">
        <div class="header-section">
            <div class="cover-photo"></div>
            <img src="images/amir.jpg" class="profile-img" alt="Amir School" onerror="this.src='https://via.placeholder.com/130'">
        </div>

        <div class="school-info">
            <h1>Ù…Ø¯Ø±Ø³Ø© Ø£Ù…ÙŠØ± Ù„Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±Ù</h1>
            <p id="schoolDesc" style="color:var(--muted); margin-top: 5px; font-weight: 600; min-height: 24px;"></p>
            <div id="shopStatus" class="status-badge">
                <div class="status-main">
                    <span id="statusDot" class="dot"></span>
                    <span id="statusText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>
                </div>
                <div id="statusTimer" class="status-timer"></div>
            </div>
        </div>

        <h3 class="section-title"><i class="far fa-clock"></i> Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„</h3>
        <div class="hours-card">
            <table class="hours-table">
                <tr>
                    <td>Ø§Ù„Ø³Ø¨Øª â€“ Ø§Ù„Ø®Ù…ÙŠØ³</td>
                    <td class="time-cell">09:00 AM - 05:00 PM</td>
                </tr>
                <tr>
                    <td>Ø§Ù„Ø¬Ù…Ø¹Ø©</td>
                    <td class="time-cell">02:00 PM - 05:00 PM</td>
                </tr>
            </table>
        </div>

        <div class="links-container">
            <a href="tel:+213699748196" class="link-btn"><i class="fa fa-phone"></i> 0699 74 81 96</a>
            <a href="https://wa.me/213699748196" class="link-btn"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</a>
            <a href="https://www.facebook.com/amirformation" class="link-btn"><i class="fab fa-facebook"></i> ÙØ§ÙŠØ³Ø¨ÙˆÙƒ</a>
            <a href="https://www.tiktok.com/@chefsamahbradai" class="link-btn"><i class="fab fa-tiktok"></i> ØªÙŠÙƒ ØªÙˆÙƒ</a>
        </div>

        <h3 class="section-title">Ø¹Ø¯Ù‘Ø§Ø¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</h3>
        <div class="countdown-container">
            <div class="countdown-grid">
                <div class="countdown-item">
                    <span id="ramadan-days" class="cd-days">--</span>
                    <span class="cd-label">Ù„Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† 2026</span>
                </div>
                <div class="countdown-item">
                    <span id="eid-days" class="cd-days">--</span>
                    <span class="cd-label">Ù„Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± 2026</span>
                </div>
            </div>
        </div>

        <h3 class="section-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©</h3>
        <div class="sweets-grid" id="sweetsGrid"></div>

        <h3 class="section-title">âœ¨ Ø·Ù„Ø¨ ØªØ³Ø¹ÙŠØ±Ø© Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</h3>
        <div class="order-form">
            <div class="form-group">
                <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
                <input type="text" id="custName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
            </div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</label>
                <select id="eventType">
                    <option value="Ø¹Ø±Ø³">Ø¹Ø±Ø³</option>
                    <option value="Ø®Ø·ÙˆØ¨Ø©">Ø®Ø·ÙˆØ¨Ø©</option>
                    <option value="Ø®ØªØ§Ù†">Ø®ØªØ§Ù†</option>
                    <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                </select>
            </div>
            <div class="form-group">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</label>
                <input type="date" id="eventDate">
            </div>
            <div class="form-group">
                <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</label>
                <textarea id="orderNotes" rows="3"></textarea>
            </div>
            <button class="btn-send" onclick="sendQuoteRequest()">
                <i class="fab fa-whatsapp"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
            </button>
        </div>

        <h3 class="section-title">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h3>
        <div class="faq-container" id="faqAccordion">
            <div class="faq-item">
                <button class="faq-question">Ù‡Ù„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø©ØŸ <i class="fa fa-chevron-down"></i></button>
                <div class="faq-answer">Ù†Ø¹Ù…ØŒ Ø¬Ù…ÙŠØ¹ ØªÙƒÙˆÙŠÙ†Ø§ØªÙ†Ø§ ØªØªÙˆØ¬ Ø¨Ø´Ù‡Ø§Ø¯Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© ØªÙ…ÙƒÙ†ÙƒÙ… Ù…Ù† Ø¯Ø®ÙˆÙ„ Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ù„.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Ù‡Ù„ ÙŠÙˆØ¬Ø¯ ØªÙˆØµÙŠÙ„ØŸ <i class="fa fa-chevron-down"></i></button>
                <div class="faq-answer">Ù†Ø¹Ù…ØŒ Ù†ÙˆÙØ± Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø¨Ù„Ø¯ÙŠØ§Øª ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ø´Ù„Ù.</div>
            </div>
        </div>

        <footer class="main-footer">
            <div class="footer-logo">Ù…Ø¯Ø±Ø³Ø© Ø£Ù…ÙŠØ±</div>
            <p>Â© 2026 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p style="font-size: 0.8rem; margin-top: 10px;">
                ØµÙÙ…Ù… Ø¨ÙˆØ§Ø³Ø·Ø© <a href="#" class="highlight-primary">Ø¨Ø±Ø§Ø¯Ø¹ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù†</a>
            </p>
        </footer>
    </div>
</div>

<div class="cart-floating-btn" onclick="toggleCart()">
    <i class="fas fa-shopping-basket"></i>
    <span class="cart-count" id="cartCount">0</span>
</div>

<div id="cartModal" class="cart-modal">
    <div class="cart-content">
        <h3 style="text-align:right; color:var(--primary-dark); margin-bottom:15px;">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª</h3>
        <div id="cartItemsList"></div>

        <div class="delivery-section">
            <h4 style="font-size: 0.85rem; margin-bottom: 10px; text-align: right;">ğŸ“ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„ (Ø§Ù„Ø´Ù„Ù)</h4>
            <div style="position: relative;">
                <input type="text" id="destinationInput" placeholder="Ø§ÙƒØªØ¨ Ø¨Ù„Ø¯ÙŠØ© ÙˆØ¬Ù‡ØªÙƒ..." 
                       style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; font-family: 'Cairo';" 
                       oninput="searchLocation(this.value)">
                <div id="searchSuggestions" class="search-dropdown"></div>
            </div>
            <div class="delivery-track">
                <i class="fas fa-motorcycle moto-icon" id="motoIcon"></i>
            </div>
            <div style="display:flex; justify-content: space-between; margin-top:10px; font-weight: bold; font-size: 0.8rem;">
                <span id="deliveryCostText">Ø§Ù„ØªÙˆØµÙŠÙ„: 0 Ø¯Ø¬</span>
                <span id="distVal">Ø§Ù„Ù…Ø³Ø§ÙØ©: 0 ÙƒÙ…</span>
            </div>
        </div>

        <div style="border-top: 2px solid #eee; padding-top: 15px; display: flex; justify-content: space-between; font-weight: bold;">
            <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
            <span id="totalWithDelivery" style="color:var(--success); font-size: 1.2rem;">0 Ø¯Ø¬</span>
        </div>

        <button class="add-to-cart-btn" style="background:var(--success); padding: 15px; margin-top: 15px;" onclick="finalizeOrder()">
            ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
        </button>
        <button onclick="toggleCart()" style="background:#eee; color:#333; border:none; padding:10px; border-radius:10px; margin-top:8px; cursor:pointer; width:100%;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<script>
// --- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---
const sweets = [
    { name: "ØªØ´Ø§Ø±Ùƒ Ù…Ø³ÙƒÙ‘Ø±", price: "70 Ø¯Ø¬", img: "images/tcharakmsakar.jpg" },
    { name: "ØªØ´Ø§Ø±Ùƒ Ø§Ù„Ø¹Ø±ÙŠØ§Ù†", price: "70 Ø¯Ø¬", img: "images/tcharakarian.jpg" },
    { name: "Ø¹Ø±Ø§ÙŠØ´", price: "90 Ø¯Ø¬", img: "images/araiech.jpg" },
    { name: "ÙƒØ¹ÙŠÙƒØ¹Ø§Øª", price: "80 Ø¯Ø¬", img: "images/kaikat.jpg" },
    { name: "Ù…Ù‚Ø±ÙˆØ¶ Ø²Ù…Ø§Ù†", price: "70 Ø¯Ø¬", img: "images/maqrout.jpg" },
    { name: "Ù…Ù‚Ø±ÙˆØ¶ Ø§Ù„Ù„ÙˆØ²", price: "100 Ø¯Ø¬", img: "images/maqroutlouz.jpg" },
    { name: "ÙƒÙØªØ©", price: "200 Ø¯Ø¬", img: "images/kefta.jpg" },
    { name: "Ø¯Ø²ÙŠØ±ÙŠØ§Øª", price: "100 Ø¯Ø¬", img: "images/dziriyat.jpg" },
    { name: "Ø¨Ù‚Ù„Ø§ÙˆØ©", price: "80 Ø¯Ø¬", img: "images/baklawa.jpg" },
    { name: "Ø¨Ù‚Ù„Ø§ÙˆØ© ØªØ±ÙƒÙŠØ©", price: "80 Ø¯Ø¬", img: "images/turkish.jpg" },
    { name: "Ù‚Ù†ÙŠØ¯Ù„Ø§Øª", price: "80 Ø¯Ø¬", img: "images/qnidlet.jpg" },
    { name: "Ù…Ø´ÙˆÙƒ Ø§Ù„Ø¨Ø§ÙŠ", price: "200 Ø¯Ø¬", img: "images/mcheweklouz.jpg" },
    { name: "Ø§Ù„ÙØ§ÙƒÙ‡Ø©", price: "200 Ø¯Ø¬", img: "images/fruits.jpg" },
    { name: "ØµØ§Ø¨Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¬ÙˆÙ†", price: "40 Ø¯Ø¬", img: "images/sabli.jpg" },
    { name: "Ù…Ø´ÙˆÙƒ", price: "60 Ø¯Ø¬", img: "images/mchewek.jpg" },
    { name: "Ø¬Ù„Ø¬Ù„Ø§Ù†ÙŠØ©", price: "70 Ø¯Ø¬", img: "images/djeljlania.jpg" },
    { name: "Ù…Ø®Ø¨Ø²", price: "120 Ø¯Ø¬", img: "images/mkhabez.jpg" },
    { name: "ÙƒØ¹Ùƒ Ø§Ù„Ù†Ù‚Ø§Ø´", price: "70 Ø¯Ø¬", img: "images/naqach.jpg" },
    { name: "Ø³Ù†ÙŠÙƒØ±Ø²", price: "80 Ø¯Ø¬", img: "images/snickers.jpg" },
    { name: "Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø´ÙƒÙˆÙ„Ø§Ø·Ø©", price: "80 Ø¯Ø¬", img: "images/chikoula.jpg" },
    { name: "Ø¨Ù†ÙŠÙˆÙ†", price: "80 Ø¯Ø¬", img: "images/bniwen.jpg" },
    { name: "Ø·Ø§Ø¨Ø¹ Ø²Ù…Ø§Ù†", price: "30 Ø¯Ø¬", img: "images/tabaa.jpg" },
    { name: "Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø·Ù„ÙŠØ©", price: "40 Ø¯Ø¬", img: "images/tabaatalia.jpg" },
    { name: "ØºØ±ÙŠØ¨ÙŠØ©", price: "50 Ø¯Ø¬", img: "images/ghriba.jpg" }
];

const chlefCommunes = [
    { name: "Ø§Ù„Ø´Ù„Ù", lat: 36.1647, lng: 1.3317 },
    { name: "Ø³Ù†Ø¬Ø§Ø³", lat: 36.1039, lng: 1.3508 },
    { name: "ÙˆØ§Ø¯ÙŠ Ø§Ù„ÙØ¶Ø©", lat: 36.1775, lng: 1.5286 },
    { name: "Ø£ÙˆÙ„Ø§Ø¯ ÙØ§Ø±Ø³", lat: 36.2256, lng: 1.2464 },
    { name: "Ø§Ù„Ø´Ø·ÙŠØ©", lat: 36.2089, lng: 1.2989 },
    { name: "Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠØ©", lat: 36.1158, lng: 1.5544 },
    { name: "Ø§Ù„Ø²Ø¨ÙˆØ¬Ø©", lat: 36.3389, lng: 1.2508 },
    { name: "ØªÙ†Ø³", lat: 36.5111, lng: 1.3069 },
    { name: "Ø¨ÙˆÙ‚Ø§Ø¯ÙŠØ±", lat: 36.0658, lng: 1.1278 }
];

const origin = { lat: 36.1622, lng: 1.3417 }; // Ø£ÙˆÙ„Ø§Ø¯ Ù…Ø­Ù…Ø¯
let cart = [];
let deliveryCost = 0;
let charIdx = 0;
const typingText = "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ø¯Ø±Ø³Ø© Ø£Ù…ÙŠØ±ØŒ Ù†Ø¶Ù…Ù† Ù„ÙƒÙ… Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø°ÙˆÙ‚ Ø§Ù„Ø±ÙÙŠØ¹ ÙÙŠ ÙƒÙ„ Ø­Ø¨Ø©..";

// --- Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---

function renderSweets() {
    const grid = document.getElementById('sweetsGrid');
    if (!grid) return;
    grid.innerHTML = sweets.map((s, index) => `
        <div class="sweet-card">
            <img src="${s.img}" class="sweet-img" onerror="this.src='https://via.placeholder.com/150?text=Ø­Ù„ÙˆÙ‰'">
            <div style="font-weight:bold; margin:8px 0; font-size:0.85rem; height:34px; overflow:hidden;">${s.name}</div>
            <div style="color:var(--primary-dark); font-weight:800;">${s.price}</div>
            <button class="add-to-cart-btn" onclick="addToCart(${index})">Ø£Ø¶Ù Ù„Ù„Ø·Ù„Ø¨</button>
        </div>
    `).join('');
}

function addToCart(index) {
    const item = sweets[index];
    const existing = cart.find(c => c.name === item.name);
    if (existing) {
        existing.qty += 10;
    } else {
        cart.push({ ...item, qty: 50 });
    }
    updateCartUI();
    const btn = event.currentTarget;
    btn.innerHTML = "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“";
    setTimeout(() => btn.innerHTML = "Ø£Ø¶Ù Ù„Ù„Ø·Ù„Ø¨", 1000);
}

function updateCartUI() {
    const count = document.getElementById('cartCount');
    if (count) count.innerText = cart.reduce((sum, item) => sum + 1, 0);
    renderCartItems();
}

function renderCartItems() {
    const container = document.getElementById("cartItemsList");
    let subtotal = 0;

    if (cart.length === 0) {
        container.innerHTML = `<p style="text-align:center; padding:20px; color:#999;">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>`;
        document.getElementById("totalWithDelivery").innerText = "0 Ø¯Ø¬";
        return;
    }

    container.innerHTML = cart.map((item, index) => {
        const priceNum = parseInt(item.price.replace(/\D/g, ''));
        subtotal += priceNum * item.qty;
        return `
            <div style="display:flex; align-items:center; gap:10px; padding:10px; border-bottom:1px solid #eee;">
                <img src="${item.img}" style="width:40px; height:40px; border-radius:5px;" onerror="this.src='https://via.placeholder.com/40'">
                <div style="flex:1; text-align:right;">
                    <div style="font-weight:bold; font-size:0.85rem;">${item.name}</div>
                    <div style="font-size:0.75rem; color:#666;">${item.qty} Ø­Ø¨Ø© Ã— ${item.price}</div>
                </div>
                <div style="display:flex; gap:5px;">
                    <button onclick="changeQty(${index}, 10)" style="width:25px; border:none; background:#eee;">+</button>
                    <button onclick="changeQty(${index}, -10)" style="width:25px; border:none; background:#eee;">-</button>
                    <button onclick="removeFromCart(${index})" style="background:none; border:none; color:red;"><i class="fa fa-trash"></i></button>
                </div>
            </div>
        `;
    }).join('');

    document.getElementById("totalWithDelivery").innerText = (subtotal + deliveryCost).toLocaleString() + " Ø¯Ø¬";
}

function changeQty(index, delta) {
    cart[index].qty = Math.max(10, cart[index].qty + delta);
    renderCartItems();
}

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartUI();
}

function toggleCart() {
    const modal = document.getElementById("cartModal");
    modal.style.display = (modal.style.display === "flex") ? "none" : "flex";
}

// --- Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ ---

function searchLocation(val) {
    const list = document.getElementById('searchSuggestions');
    if (!val) { list.style.display = 'none'; return; }
    const filtered = chlefCommunes.filter(c => c.name.includes(val));
    if (filtered.length > 0) {
        list.innerHTML = filtered.map(c => `<div class="search-item" onclick="selectLocation('${c.name}', ${c.lat}, ${c.lng})">${c.name}</div>`).join('');
        list.style.display = 'block';
    } else {
        list.style.display = 'none';
    }
}

function selectLocation(name, lat, lng) {
    document.getElementById('destinationInput').value = name;
    document.getElementById('searchSuggestions').style.display = 'none';
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© (Ù‚Ø§Ù†ÙˆÙ† Ù‡Ø§ÙÙŠØ±Ø³ÙŠÙ† Ù…Ø¨Ø³Ø·)
    const dist = calculateDistance(origin.lat, origin.lng, lat, lng);
    document.getElementById('distVal').innerText = `Ø§Ù„Ù…Ø³Ø§ÙØ©: ${dist.toFixed(1)} ÙƒÙ…`;
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± (Ù…Ø«Ù„Ø§Ù‹ 20 Ø¯Ø¬ Ù„ÙƒÙ„ ÙƒÙ… + 100 Ø¯Ø¬ Ù‚Ø§Ø¹Ø¯Ø©)
    deliveryCost = Math.round(dist * 20 + 100);
    document.getElementById('deliveryCostText').innerText = `Ø§Ù„ØªÙˆØµÙŠÙ„: ${deliveryCost} Ø¯Ø¬`;
    
    // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…ÙˆØªÙˆ
    document.getElementById('motoIcon').style.right = "85%";
    setTimeout(() => renderCartItems(), 500);
}

function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
    return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

// --- Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø®Ø±Ù‰ ---

function updateShopStatus() {
    const now = new Date();
    const day = now.getDay();
    const hour = now.getHours();
    let isOpen = (day === 5) ? (hour >= 14 && hour < 17) : (hour >= 9 && hour < 17);
    
    const dot = document.getElementById('statusDot');
    const text = document.getElementById('statusText');
    if (dot && text) {
        dot.className = isOpen ? "dot dot-open" : "dot dot-closed";
        text.innerText = isOpen ? "Ù…ÙØªÙˆØ­ Ø­Ø§Ù„ÙŠØ§Ù‹ âœ…" : "Ù…ØºÙ„Ù‚ Ø§Ù„Ø¢Ù† âŒ";
    }
}

function typeEffect() {
    const el = document.getElementById("schoolDesc");
    if (el && charIdx < typingText.length) {
        el.innerHTML += typingText.charAt(charIdx);
        charIdx++;
        setTimeout(typeEffect, 50);
    }
}

function updateCountdowns() {
    const ramadan = new Date("February 18, 2026 00:00:00").getTime();
    const eid = new Date("March 20, 2026 00:00:00").getTime();
    const now = new Date().getTime();

    const diffR = ramadan - now;
    const diffE = eid - now;

    if (document.getElementById("ramadan-days")) 
        document.getElementById("ramadan-days").innerText = Math.max(0, Math.floor(diffR / (1000 * 60 * 60 * 24)));
    if (document.getElementById("eid-days")) 
        document.getElementById("eid-days").innerText = Math.max(0, Math.floor(diffE / (1000 * 60 * 60 * 24)));
}

function finalizeOrder() {
    if (cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!");
    let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…Ø¯Ø±Ø³Ø© Ø£Ù…ÙŠØ±*%0A%0A`;
    cart.forEach(item => msg += `â€¢ ${item.name} (${item.qty} Ø­Ø¨Ø©)%0A`);
    msg += `%0A*Ø§Ù„Ù…ÙƒØ§Ù†:* ${document.getElementById('destinationInput').value || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}`;
    msg += `%0A*Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:* ${document.getElementById('totalWithDelivery').innerText}`;
    window.open(`https://wa.me/213699748196?text=${msg}`, '_blank');
}

function sendQuoteRequest() {
    const name = document.getElementById('custName').value;
    const type = document.getElementById('eventType').value;
    if (!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…");
    let msg = `*Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ØªØ³Ø¹ÙŠØ±Ø© Ù…Ù†Ø§Ø³Ø¨Ø©*%0A%0AØ§Ù„Ø§Ø³Ù…: ${name}%0AØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©: ${type}%0AØ§Ù„ØªØ§Ø±ÙŠØ®: ${document.getElementById('eventDate').value}%0AÙ…Ù„Ø§Ø­Ø¸Ø§Øª: ${document.getElementById('orderNotes').value}`;
    window.open(`https://wa.me/213699748196?text=${msg}`, '_blank');
}

function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

window.onscroll = () => {
    const btn = document.getElementById("backToTop");
    if (btn) btn.style.display = (window.scrollY > 400) ? "flex" : "none";
};

// ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
window.onload = () => {
    renderSweets();
    updateShopStatus();
    typeEffect();
    updateCountdowns();
    
    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
    document.querySelectorAll(".faq-question").forEach(q => {
        q.onclick = () => q.parentElement.classList.toggle("active");
    });
};
</script>

</body>
</html>
